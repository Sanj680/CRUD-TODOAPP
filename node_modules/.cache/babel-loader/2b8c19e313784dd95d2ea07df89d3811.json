{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\sanja\\\\Downloads\\\\todo-react-main\\\\todo-react-main\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport useState from \"rc-util/es/hooks/useState\";\nimport * as React from 'react';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/button';\n\nfunction isThenable(thing) {\n  return !!(thing && !!thing.then);\n}\n\nvar ActionButton = function ActionButton(props) {\n  var clickedRef = React.useRef(false);\n  var ref = React.useRef(null);\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var close = props.close;\n\n  var onInternalClose = function onInternalClose() {\n    close === null || close === void 0 ? void 0 : close.apply(void 0, arguments);\n  };\n\n  React.useEffect(function () {\n    var timeoutId = null;\n\n    if (props.autoFocus) {\n      timeoutId = setTimeout(function () {\n        var _a;\n\n        (_a = ref.current) === null || _a === void 0 ? void 0 : _a.focus();\n      });\n    }\n\n    return function () {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n\n  var handlePromiseOnOk = function handlePromiseOnOk(returnValueOfOnOk) {\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      setLoading(false, true);\n      onInternalClose.apply(void 0, arguments);\n      clickedRef.current = false;\n    }, function (e) {\n      // Emit error when catch promise reject\n      // eslint-disable-next-line no-console\n      console.error(e); // See: https://github.com/ant-design/ant-design/issues/6183\n\n      setLoading(false, true);\n      clickedRef.current = false;\n    });\n  };\n\n  var onClick = function onClick(e) {\n    var actionFn = props.actionFn;\n\n    if (clickedRef.current) {\n      return;\n    }\n\n    clickedRef.current = true;\n\n    if (!actionFn) {\n      onInternalClose();\n      return;\n    }\n\n    var returnValueOfOnOk;\n\n    if (props.emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n\n      if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        onInternalClose(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close); // https://github.com/ant-design/ant-design/issues/23358\n\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n\n      if (!returnValueOfOnOk) {\n        onInternalClose();\n        return;\n      }\n    }\n\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n\n  var type = props.type,\n      children = props.children,\n      prefixCls = props.prefixCls,\n      buttonProps = props.buttonProps;\n  return /*#__PURE__*/React.createElement(Button, Object.assign({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: ref\n  }), children);\n};\n\nexport default ActionButton;","map":{"version":3,"sources":["C:/Users/sanja/Downloads/todo-react-main/todo-react-main/node_modules/antd/es/_util/ActionButton.js"],"names":["useState","React","Button","convertLegacyProps","isThenable","thing","then","ActionButton","props","clickedRef","useRef","ref","loading","setLoading","close","onInternalClose","apply","arguments","useEffect","timeoutId","autoFocus","setTimeout","_a","current","focus","clearTimeout","handlePromiseOnOk","returnValueOfOnOk","e","console","error","onClick","actionFn","emitEvent","quitOnNullishReturnValue","length","type","children","prefixCls","buttonProps","createElement","Object","assign"],"mappings":"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","sourcesContent":["import useState from \"rc-util/es/hooks/useState\";\nimport * as React from 'react';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/button';\nfunction isThenable(thing) {\n  return !!(thing && !!thing.then);\n}\nconst ActionButton = props => {\n  const clickedRef = React.useRef(false);\n  const ref = React.useRef(null);\n  const [loading, setLoading] = useState(false);\n  const {\n    close\n  } = props;\n  const onInternalClose = function () {\n    close === null || close === void 0 ? void 0 : close.apply(void 0, arguments);\n  };\n  React.useEffect(() => {\n    let timeoutId = null;\n    if (props.autoFocus) {\n      timeoutId = setTimeout(() => {\n        var _a;\n        (_a = ref.current) === null || _a === void 0 ? void 0 : _a.focus();\n      });\n    }\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, []);\n  const handlePromiseOnOk = returnValueOfOnOk => {\n    if (!isThenable(returnValueOfOnOk)) {\n      return;\n    }\n    setLoading(true);\n    returnValueOfOnOk.then(function () {\n      setLoading(false, true);\n      onInternalClose.apply(void 0, arguments);\n      clickedRef.current = false;\n    }, e => {\n      // Emit error when catch promise reject\n      // eslint-disable-next-line no-console\n      console.error(e);\n      // See: https://github.com/ant-design/ant-design/issues/6183\n      setLoading(false, true);\n      clickedRef.current = false;\n    });\n  };\n  const onClick = e => {\n    const {\n      actionFn\n    } = props;\n    if (clickedRef.current) {\n      return;\n    }\n    clickedRef.current = true;\n    if (!actionFn) {\n      onInternalClose();\n      return;\n    }\n    let returnValueOfOnOk;\n    if (props.emitEvent) {\n      returnValueOfOnOk = actionFn(e);\n      if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n        clickedRef.current = false;\n        onInternalClose(e);\n        return;\n      }\n    } else if (actionFn.length) {\n      returnValueOfOnOk = actionFn(close);\n      // https://github.com/ant-design/ant-design/issues/23358\n      clickedRef.current = false;\n    } else {\n      returnValueOfOnOk = actionFn();\n      if (!returnValueOfOnOk) {\n        onInternalClose();\n        return;\n      }\n    }\n    handlePromiseOnOk(returnValueOfOnOk);\n  };\n  const {\n    type,\n    children,\n    prefixCls,\n    buttonProps\n  } = props;\n  return /*#__PURE__*/React.createElement(Button, Object.assign({}, convertLegacyProps(type), {\n    onClick: onClick,\n    loading: loading,\n    prefixCls: prefixCls\n  }, buttonProps, {\n    ref: ref\n  }), children);\n};\nexport default ActionButton;"]},"metadata":{},"sourceType":"module"}