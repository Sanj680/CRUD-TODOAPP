{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport hash from '@emotion/hash';\nimport canUseDom from \"rc-util/es/Dom/canUseDom\";\nimport { removeCSS, updateCSS } from \"rc-util/es/Dom/dynamicCSS\";\nimport * as React from 'react'; // @ts-ignore\n\nimport unitless from '@emotion/unitless';\nimport { compile, serialize, stringify } from 'stylis';\nimport { contentQuotesLinter, hashedAnimationLinter } from \"../linters\";\nimport StyleContext, { ATTR_DEV_CACHE_PATH, ATTR_MARK, ATTR_TOKEN, CSS_IN_JS_INSTANCE, CSS_IN_JS_INSTANCE_ID } from \"../StyleContext\";\nimport { supportLayer } from \"../util\";\nimport useGlobalCache from \"./useGlobalCache\";\nvar isClientSide = canUseDom();\nvar SKIP_CHECK = '_skip_check_'; // ============================================================================\n// ==                                 Parser                                 ==\n// ============================================================================\n// Preprocessor style content to browser support one\n\nexport function normalizeStyle(styleStr) {\n  var serialized = serialize(compile(styleStr), stringify);\n  return serialized.replace(/\\{%%%\\:[^;];}/g, ';');\n}\n\nfunction isCompoundCSSProperty(value) {\n  return _typeof(value) === 'object' && value && SKIP_CHECK in value;\n} // 注入 hash 值\n\n\nfunction injectSelectorHash(key, hashId, hashPriority) {\n  if (!hashId) {\n    return key;\n  }\n\n  var hashClassName = \".\".concat(hashId);\n  var hashSelector = hashPriority === 'low' ? \":where(\".concat(hashClassName, \")\") : hashClassName; // 注入 hashId\n\n  var keys = key.split(',').map(function (k) {\n    var _firstPath$match;\n\n    var fullPath = k.trim().split(/\\s+/); // 如果 Selector 第一个是 HTML Element，那我们就插到它的后面。反之，就插到最前面。\n\n    var firstPath = fullPath[0] || '';\n    var htmlElement = ((_firstPath$match = firstPath.match(/^\\w+/)) === null || _firstPath$match === void 0 ? void 0 : _firstPath$match[0]) || '';\n    firstPath = \"\".concat(htmlElement).concat(hashSelector).concat(firstPath.slice(htmlElement.length));\n    return [firstPath].concat(_toConsumableArray(fullPath.slice(1))).join(' ');\n  });\n  return keys.join(',');\n} // Global effect style will mount once and not removed\n// The effect will not save in SSR cache (e.g. keyframes)\n\n\nvar globalEffectStyleKeys = new Set();\n/**\n * @private Test only. Clear the global effect style keys.\n */\n\nexport var _cf = process.env.NODE_ENV !== 'production' ? function () {\n  return globalEffectStyleKeys.clear();\n} : undefined; // Parse CSSObject to style content\n\nexport var parseStyle = function parseStyle(interpolation) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    root: true,\n    parentSelectors: []\n  },\n      root = _ref.root,\n      injectHash = _ref.injectHash,\n      parentSelectors = _ref.parentSelectors;\n\n  var hashId = config.hashId,\n      layer = config.layer,\n      path = config.path,\n      hashPriority = config.hashPriority,\n      _config$transformers = config.transformers,\n      transformers = _config$transformers === void 0 ? [] : _config$transformers,\n      _config$linters = config.linters,\n      linters = _config$linters === void 0 ? [] : _config$linters;\n  var styleStr = '';\n  var effectStyle = {};\n\n  function parseKeyframes(keyframes) {\n    var animationName = keyframes.getName(hashId);\n\n    if (!effectStyle[animationName]) {\n      var _parseStyle = parseStyle(keyframes.style, config, {\n        root: false,\n        parentSelectors: parentSelectors\n      }),\n          _parseStyle2 = _slicedToArray(_parseStyle, 1),\n          _parsedStr = _parseStyle2[0];\n\n      effectStyle[animationName] = \"@keyframes \".concat(keyframes.getName(hashId)).concat(_parsedStr);\n    }\n  }\n\n  function flattenList(list) {\n    var fullList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    list.forEach(function (item) {\n      if (Array.isArray(item)) {\n        flattenList(item, fullList);\n      } else if (item) {\n        fullList.push(item);\n      }\n    });\n    return fullList;\n  }\n\n  var flattenStyleList = flattenList(Array.isArray(interpolation) ? interpolation : [interpolation]);\n  flattenStyleList.forEach(function (originStyle) {\n    // Only root level can use raw string\n    var style = typeof originStyle === 'string' && !root ? {} : originStyle;\n\n    if (typeof style === 'string') {\n      styleStr += \"\".concat(style, \"\\n\");\n    } else if (style._keyframe) {\n      // Keyframe\n      parseKeyframes(style);\n    } else {\n      var mergedStyle = transformers.reduce(function (prev, trans) {\n        var _trans$visit;\n\n        return (trans === null || trans === void 0 ? void 0 : (_trans$visit = trans.visit) === null || _trans$visit === void 0 ? void 0 : _trans$visit.call(trans, prev)) || prev;\n      }, style); // Normal CSSObject\n\n      Object.keys(mergedStyle).forEach(function (key) {\n        var value = mergedStyle[key];\n\n        if (_typeof(value) === 'object' && value && (key !== 'animationName' || !value._keyframe) && !isCompoundCSSProperty(value)) {\n          var subInjectHash = false; // 当成嵌套对象来处理\n\n          var mergedKey = key.trim(); // Whether treat child as root. In most case it is false.\n\n          var nextRoot = false; // 拆分多个选择器\n\n          if ((root || injectHash) && hashId) {\n            if (mergedKey.startsWith('@')) {\n              // 略过媒体查询，交给子节点继续插入 hashId\n              subInjectHash = true;\n            } else {\n              // 注入 hashId\n              mergedKey = injectSelectorHash(key, hashId, hashPriority);\n            }\n          } else if (root && !hashId && (mergedKey === '&' || mergedKey === '')) {\n            // In case of `{ '&': { a: { color: 'red' } } }` or `{ '': { a: { color: 'red' } } }` without hashId,\n            // we will get `&{a:{color:red;}}` or `{a:{color:red;}}` string for stylis to compile.\n            // But it does not conform to stylis syntax,\n            // and finally we will get `{color:red;}` as css, which is wrong.\n            // So we need to remove key in root, and treat child `{ a: { color: 'red' } }` as root.\n            mergedKey = '';\n            nextRoot = true;\n          }\n\n          var _parseStyle3 = parseStyle(value, config, {\n            root: nextRoot,\n            injectHash: subInjectHash,\n            parentSelectors: [].concat(_toConsumableArray(parentSelectors), [mergedKey])\n          }),\n              _parseStyle4 = _slicedToArray(_parseStyle3, 2),\n              _parsedStr2 = _parseStyle4[0],\n              childEffectStyle = _parseStyle4[1];\n\n          effectStyle = _objectSpread(_objectSpread({}, effectStyle), childEffectStyle);\n          styleStr += \"\".concat(mergedKey).concat(_parsedStr2);\n        } else {\n          var _value;\n\n          var actualValue = (_value = value === null || value === void 0 ? void 0 : value.value) !== null && _value !== void 0 ? _value : value;\n\n          if (process.env.NODE_ENV !== 'production' && (_typeof(value) !== 'object' || !(value !== null && value !== void 0 && value[SKIP_CHECK]))) {\n            [contentQuotesLinter, hashedAnimationLinter].concat(_toConsumableArray(linters)).forEach(function (linter) {\n              return linter(key, actualValue, {\n                path: path,\n                hashId: hashId,\n                parentSelectors: parentSelectors\n              });\n            });\n          } // 如果是样式则直接插入\n\n\n          var styleName = key.replace(/[A-Z]/g, function (match) {\n            return \"-\".concat(match.toLowerCase());\n          }); // Auto suffix with px\n\n          var formatValue = actualValue;\n\n          if (!unitless[key] && typeof formatValue === 'number' && formatValue !== 0) {\n            formatValue = \"\".concat(formatValue, \"px\");\n          } // handle animationName & Keyframe value\n\n\n          if (key === 'animationName' && value !== null && value !== void 0 && value._keyframe) {\n            parseKeyframes(value);\n            formatValue = value.getName(hashId);\n          }\n\n          styleStr += \"\".concat(styleName, \":\").concat(formatValue, \";\");\n        }\n      });\n    }\n  });\n\n  if (!root) {\n    styleStr = \"{\".concat(styleStr, \"}\");\n  } else if (layer && supportLayer()) {\n    var layerCells = layer.split(',');\n    var layerName = layerCells[layerCells.length - 1].trim();\n    styleStr = \"@layer \".concat(layerName, \" {\").concat(styleStr, \"}\"); // Order of layer if needed\n\n    if (layerCells.length > 1) {\n      // zombieJ: stylis do not support layer order, so we need to handle it manually.\n      styleStr = \"@layer \".concat(layer, \"{%%%:%}\").concat(styleStr);\n    }\n  }\n\n  return [styleStr, effectStyle];\n}; // ============================================================================\n// ==                                Register                                ==\n// ============================================================================\n\nfunction uniqueHash(path, styleStr) {\n  return hash(\"\".concat(path.join('%')).concat(styleStr));\n}\n\nfunction Empty() {\n  return null;\n}\n/**\n * Register a style to the global style sheet.\n */\n\n\nexport default function useStyleRegister(info, styleFn) {\n  var token = info.token,\n      path = info.path,\n      hashId = info.hashId,\n      layer = info.layer;\n\n  var _React$useContext = React.useContext(StyleContext),\n      autoClear = _React$useContext.autoClear,\n      mock = _React$useContext.mock,\n      defaultCache = _React$useContext.defaultCache,\n      hashPriority = _React$useContext.hashPriority,\n      container = _React$useContext.container,\n      ssrInline = _React$useContext.ssrInline,\n      transformers = _React$useContext.transformers,\n      linters = _React$useContext.linters;\n\n  var tokenKey = token._tokenKey;\n  var fullPath = [tokenKey].concat(_toConsumableArray(path)); // Check if need insert style\n\n  var isMergedClientSide = isClientSide;\n\n  if (process.env.NODE_ENV !== 'production' && mock !== undefined) {\n    isMergedClientSide = mock === 'client';\n  }\n\n  var _useGlobalCache = useGlobalCache('style', fullPath, // Create cache if needed\n  function () {\n    var styleObj = styleFn();\n\n    var _parseStyle5 = parseStyle(styleObj, {\n      hashId: hashId,\n      hashPriority: hashPriority,\n      layer: layer,\n      path: path.join('-'),\n      transformers: transformers,\n      linters: linters\n    }),\n        _parseStyle6 = _slicedToArray(_parseStyle5, 2),\n        parsedStyle = _parseStyle6[0],\n        effectStyle = _parseStyle6[1];\n\n    var styleStr = normalizeStyle(parsedStyle);\n    var styleId = uniqueHash(fullPath, styleStr);\n\n    if (isMergedClientSide) {\n      var style = updateCSS(styleStr, styleId, {\n        mark: ATTR_MARK,\n        prepend: 'queue',\n        attachTo: container\n      });\n      style[CSS_IN_JS_INSTANCE] = CSS_IN_JS_INSTANCE_ID; // Used for `useCacheToken` to remove on batch when token removed\n\n      style.setAttribute(ATTR_TOKEN, tokenKey); // Dev usage to find which cache path made this easily\n\n      if (process.env.NODE_ENV !== 'production') {\n        style.setAttribute(ATTR_DEV_CACHE_PATH, fullPath.join('|'));\n      } // Inject client side effect style\n\n\n      Object.keys(effectStyle).forEach(function (effectKey) {\n        if (!globalEffectStyleKeys.has(effectKey)) {\n          globalEffectStyleKeys.add(effectKey); // Inject\n\n          updateCSS(normalizeStyle(effectStyle[effectKey]), \"_effect-\".concat(effectKey), {\n            mark: ATTR_MARK,\n            prepend: 'queue',\n            attachTo: container\n          });\n        }\n      });\n    }\n\n    return [styleStr, tokenKey, styleId];\n  }, // Remove cache if no need\n  function (_ref2, fromHMR) {\n    var _ref3 = _slicedToArray(_ref2, 3),\n        styleId = _ref3[2];\n\n    if ((fromHMR || autoClear) && isClientSide) {\n      removeCSS(styleId, {\n        mark: ATTR_MARK\n      });\n    }\n  }),\n      _useGlobalCache2 = _slicedToArray(_useGlobalCache, 3),\n      cachedStyleStr = _useGlobalCache2[0],\n      cachedTokenKey = _useGlobalCache2[1],\n      cachedStyleId = _useGlobalCache2[2];\n\n  return function (node) {\n    var styleNode;\n\n    if (!ssrInline || isMergedClientSide || !defaultCache) {\n      styleNode = /*#__PURE__*/React.createElement(Empty, null);\n    } else {\n      var _ref4;\n\n      styleNode = /*#__PURE__*/React.createElement(\"style\", _extends({}, (_ref4 = {}, _defineProperty(_ref4, ATTR_TOKEN, cachedTokenKey), _defineProperty(_ref4, ATTR_MARK, cachedStyleId), _ref4), {\n        dangerouslySetInnerHTML: {\n          __html: cachedStyleStr\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, styleNode, node);\n  };\n} // ============================================================================\n// ==                                  SSR                                   ==\n// ============================================================================\n\nexport function extractStyle(cache) {\n  // prefix with `style` is used for `useStyleRegister` to cache style context\n  var styleKeys = Array.from(cache.cache.keys()).filter(function (key) {\n    return key.startsWith('style%');\n  }); // const tokenStyles: Record<string, string[]> = {};\n\n  var styleText = '';\n  styleKeys.forEach(function (key) {\n    var _ = _slicedToArray(cache.cache.get(key)[1], 3),\n        styleStr = _[0],\n        tokenKey = _[1],\n        styleId = _[2];\n\n    styleText += \"<style \".concat(ATTR_TOKEN, \"=\\\"\").concat(tokenKey, \"\\\" \").concat(ATTR_MARK, \"=\\\"\").concat(styleId, \"\\\">\").concat(styleStr, \"</style>\");\n  });\n  return styleText;\n}","map":{"version":3,"sources":["C:/Users/sanja/Downloads/todo-react-main/todo-react-main/node_modules/@ant-design/cssinjs/es/hooks/useStyleRegister.js"],"names":["_extends","_defineProperty","_objectSpread","_slicedToArray","_toConsumableArray","_typeof","hash","canUseDom","removeCSS","updateCSS","React","unitless","compile","serialize","stringify","contentQuotesLinter","hashedAnimationLinter","StyleContext","ATTR_DEV_CACHE_PATH","ATTR_MARK","ATTR_TOKEN","CSS_IN_JS_INSTANCE","CSS_IN_JS_INSTANCE_ID","supportLayer","useGlobalCache","isClientSide","SKIP_CHECK","normalizeStyle","styleStr","serialized","replace","isCompoundCSSProperty","value","injectSelectorHash","key","hashId","hashPriority","hashClassName","concat","hashSelector","keys","split","map","k","_firstPath$match","fullPath","trim","firstPath","htmlElement","match","slice","length","join","globalEffectStyleKeys","Set","_cf","process","env","NODE_ENV","clear","undefined","parseStyle","interpolation","config","arguments","_ref","root","parentSelectors","injectHash","layer","path","_config$transformers","transformers","_config$linters","linters","effectStyle","parseKeyframes","keyframes","animationName","getName","_parseStyle","style","_parseStyle2","_parsedStr","flattenList","list","fullList","forEach","item","Array","isArray","push","flattenStyleList","originStyle","_keyframe","mergedStyle","reduce","prev","trans","_trans$visit","visit","call","Object","subInjectHash","mergedKey","nextRoot","startsWith","_parseStyle3","_parseStyle4","_parsedStr2","childEffectStyle","_value","actualValue","linter","styleName","toLowerCase","formatValue","layerCells","layerName","uniqueHash","Empty","useStyleRegister","info","styleFn","token","_React$useContext","useContext","autoClear","mock","defaultCache","container","ssrInline","tokenKey","_tokenKey","isMergedClientSide","_useGlobalCache","styleObj","_parseStyle5","_parseStyle6","parsedStyle","styleId","mark","prepend","attachTo","setAttribute","effectKey","has","add","_ref2","fromHMR","_ref3","_useGlobalCache2","cachedStyleStr","cachedTokenKey","cachedStyleId","node","styleNode","createElement","_ref4","dangerouslySetInnerHTML","__html","Fragment","extractStyle","cache","styleKeys","from","filter","styleText","_","get"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport hash from '@emotion/hash';\nimport canUseDom from \"rc-util/es/Dom/canUseDom\";\nimport { removeCSS, updateCSS } from \"rc-util/es/Dom/dynamicCSS\";\nimport * as React from 'react'; // @ts-ignore\n\nimport unitless from '@emotion/unitless';\nimport { compile, serialize, stringify } from 'stylis';\nimport { contentQuotesLinter, hashedAnimationLinter } from \"../linters\";\nimport StyleContext, { ATTR_DEV_CACHE_PATH, ATTR_MARK, ATTR_TOKEN, CSS_IN_JS_INSTANCE, CSS_IN_JS_INSTANCE_ID } from \"../StyleContext\";\nimport { supportLayer } from \"../util\";\nimport useGlobalCache from \"./useGlobalCache\";\nvar isClientSide = canUseDom();\nvar SKIP_CHECK = '_skip_check_';\n// ============================================================================\n// ==                                 Parser                                 ==\n// ============================================================================\n// Preprocessor style content to browser support one\nexport function normalizeStyle(styleStr) {\n  var serialized = serialize(compile(styleStr), stringify);\n  return serialized.replace(/\\{%%%\\:[^;];}/g, ';');\n}\n\nfunction isCompoundCSSProperty(value) {\n  return _typeof(value) === 'object' && value && SKIP_CHECK in value;\n} // 注入 hash 值\n\n\nfunction injectSelectorHash(key, hashId, hashPriority) {\n  if (!hashId) {\n    return key;\n  }\n\n  var hashClassName = \".\".concat(hashId);\n  var hashSelector = hashPriority === 'low' ? \":where(\".concat(hashClassName, \")\") : hashClassName; // 注入 hashId\n\n  var keys = key.split(',').map(function (k) {\n    var _firstPath$match;\n\n    var fullPath = k.trim().split(/\\s+/); // 如果 Selector 第一个是 HTML Element，那我们就插到它的后面。反之，就插到最前面。\n\n    var firstPath = fullPath[0] || '';\n    var htmlElement = ((_firstPath$match = firstPath.match(/^\\w+/)) === null || _firstPath$match === void 0 ? void 0 : _firstPath$match[0]) || '';\n    firstPath = \"\".concat(htmlElement).concat(hashSelector).concat(firstPath.slice(htmlElement.length));\n    return [firstPath].concat(_toConsumableArray(fullPath.slice(1))).join(' ');\n  });\n  return keys.join(',');\n}\n\n// Global effect style will mount once and not removed\n// The effect will not save in SSR cache (e.g. keyframes)\nvar globalEffectStyleKeys = new Set();\n/**\n * @private Test only. Clear the global effect style keys.\n */\n\nexport var _cf = process.env.NODE_ENV !== 'production' ? function () {\n  return globalEffectStyleKeys.clear();\n} : undefined; // Parse CSSObject to style content\n\nexport var parseStyle = function parseStyle(interpolation) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    root: true,\n    parentSelectors: []\n  },\n      root = _ref.root,\n      injectHash = _ref.injectHash,\n      parentSelectors = _ref.parentSelectors;\n\n  var hashId = config.hashId,\n      layer = config.layer,\n      path = config.path,\n      hashPriority = config.hashPriority,\n      _config$transformers = config.transformers,\n      transformers = _config$transformers === void 0 ? [] : _config$transformers,\n      _config$linters = config.linters,\n      linters = _config$linters === void 0 ? [] : _config$linters;\n  var styleStr = '';\n  var effectStyle = {};\n\n  function parseKeyframes(keyframes) {\n    var animationName = keyframes.getName(hashId);\n\n    if (!effectStyle[animationName]) {\n      var _parseStyle = parseStyle(keyframes.style, config, {\n        root: false,\n        parentSelectors: parentSelectors\n      }),\n          _parseStyle2 = _slicedToArray(_parseStyle, 1),\n          _parsedStr = _parseStyle2[0];\n\n      effectStyle[animationName] = \"@keyframes \".concat(keyframes.getName(hashId)).concat(_parsedStr);\n    }\n  }\n\n  function flattenList(list) {\n    var fullList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    list.forEach(function (item) {\n      if (Array.isArray(item)) {\n        flattenList(item, fullList);\n      } else if (item) {\n        fullList.push(item);\n      }\n    });\n    return fullList;\n  }\n\n  var flattenStyleList = flattenList(Array.isArray(interpolation) ? interpolation : [interpolation]);\n  flattenStyleList.forEach(function (originStyle) {\n    // Only root level can use raw string\n    var style = typeof originStyle === 'string' && !root ? {} : originStyle;\n\n    if (typeof style === 'string') {\n      styleStr += \"\".concat(style, \"\\n\");\n    } else if (style._keyframe) {\n      // Keyframe\n      parseKeyframes(style);\n    } else {\n      var mergedStyle = transformers.reduce(function (prev, trans) {\n        var _trans$visit;\n\n        return (trans === null || trans === void 0 ? void 0 : (_trans$visit = trans.visit) === null || _trans$visit === void 0 ? void 0 : _trans$visit.call(trans, prev)) || prev;\n      }, style); // Normal CSSObject\n\n      Object.keys(mergedStyle).forEach(function (key) {\n        var value = mergedStyle[key];\n\n        if (_typeof(value) === 'object' && value && (key !== 'animationName' || !value._keyframe) && !isCompoundCSSProperty(value)) {\n          var subInjectHash = false; // 当成嵌套对象来处理\n\n          var mergedKey = key.trim(); // Whether treat child as root. In most case it is false.\n\n          var nextRoot = false; // 拆分多个选择器\n\n          if ((root || injectHash) && hashId) {\n            if (mergedKey.startsWith('@')) {\n              // 略过媒体查询，交给子节点继续插入 hashId\n              subInjectHash = true;\n            } else {\n              // 注入 hashId\n              mergedKey = injectSelectorHash(key, hashId, hashPriority);\n            }\n          } else if (root && !hashId && (mergedKey === '&' || mergedKey === '')) {\n            // In case of `{ '&': { a: { color: 'red' } } }` or `{ '': { a: { color: 'red' } } }` without hashId,\n            // we will get `&{a:{color:red;}}` or `{a:{color:red;}}` string for stylis to compile.\n            // But it does not conform to stylis syntax,\n            // and finally we will get `{color:red;}` as css, which is wrong.\n            // So we need to remove key in root, and treat child `{ a: { color: 'red' } }` as root.\n            mergedKey = '';\n            nextRoot = true;\n          }\n\n          var _parseStyle3 = parseStyle(value, config, {\n            root: nextRoot,\n            injectHash: subInjectHash,\n            parentSelectors: [].concat(_toConsumableArray(parentSelectors), [mergedKey])\n          }),\n              _parseStyle4 = _slicedToArray(_parseStyle3, 2),\n              _parsedStr2 = _parseStyle4[0],\n              childEffectStyle = _parseStyle4[1];\n\n          effectStyle = _objectSpread(_objectSpread({}, effectStyle), childEffectStyle);\n          styleStr += \"\".concat(mergedKey).concat(_parsedStr2);\n        } else {\n          var _value;\n\n          var actualValue = (_value = value === null || value === void 0 ? void 0 : value.value) !== null && _value !== void 0 ? _value : value;\n\n          if (process.env.NODE_ENV !== 'production' && (_typeof(value) !== 'object' || !(value !== null && value !== void 0 && value[SKIP_CHECK]))) {\n            [contentQuotesLinter, hashedAnimationLinter].concat(_toConsumableArray(linters)).forEach(function (linter) {\n              return linter(key, actualValue, {\n                path: path,\n                hashId: hashId,\n                parentSelectors: parentSelectors\n              });\n            });\n          } // 如果是样式则直接插入\n\n\n          var styleName = key.replace(/[A-Z]/g, function (match) {\n            return \"-\".concat(match.toLowerCase());\n          }); // Auto suffix with px\n\n          var formatValue = actualValue;\n\n          if (!unitless[key] && typeof formatValue === 'number' && formatValue !== 0) {\n            formatValue = \"\".concat(formatValue, \"px\");\n          } // handle animationName & Keyframe value\n\n\n          if (key === 'animationName' && value !== null && value !== void 0 && value._keyframe) {\n            parseKeyframes(value);\n            formatValue = value.getName(hashId);\n          }\n\n          styleStr += \"\".concat(styleName, \":\").concat(formatValue, \";\");\n        }\n      });\n    }\n  });\n\n  if (!root) {\n    styleStr = \"{\".concat(styleStr, \"}\");\n  } else if (layer && supportLayer()) {\n    var layerCells = layer.split(',');\n    var layerName = layerCells[layerCells.length - 1].trim();\n    styleStr = \"@layer \".concat(layerName, \" {\").concat(styleStr, \"}\"); // Order of layer if needed\n\n    if (layerCells.length > 1) {\n      // zombieJ: stylis do not support layer order, so we need to handle it manually.\n      styleStr = \"@layer \".concat(layer, \"{%%%:%}\").concat(styleStr);\n    }\n  }\n\n  return [styleStr, effectStyle];\n}; // ============================================================================\n// ==                                Register                                ==\n// ============================================================================\n\nfunction uniqueHash(path, styleStr) {\n  return hash(\"\".concat(path.join('%')).concat(styleStr));\n}\n\nfunction Empty() {\n  return null;\n}\n/**\n * Register a style to the global style sheet.\n */\n\n\nexport default function useStyleRegister(info, styleFn) {\n  var token = info.token,\n      path = info.path,\n      hashId = info.hashId,\n      layer = info.layer;\n\n  var _React$useContext = React.useContext(StyleContext),\n      autoClear = _React$useContext.autoClear,\n      mock = _React$useContext.mock,\n      defaultCache = _React$useContext.defaultCache,\n      hashPriority = _React$useContext.hashPriority,\n      container = _React$useContext.container,\n      ssrInline = _React$useContext.ssrInline,\n      transformers = _React$useContext.transformers,\n      linters = _React$useContext.linters;\n\n  var tokenKey = token._tokenKey;\n  var fullPath = [tokenKey].concat(_toConsumableArray(path)); // Check if need insert style\n\n  var isMergedClientSide = isClientSide;\n\n  if (process.env.NODE_ENV !== 'production' && mock !== undefined) {\n    isMergedClientSide = mock === 'client';\n  }\n\n  var _useGlobalCache = useGlobalCache('style', fullPath, // Create cache if needed\n  function () {\n    var styleObj = styleFn();\n\n    var _parseStyle5 = parseStyle(styleObj, {\n      hashId: hashId,\n      hashPriority: hashPriority,\n      layer: layer,\n      path: path.join('-'),\n      transformers: transformers,\n      linters: linters\n    }),\n        _parseStyle6 = _slicedToArray(_parseStyle5, 2),\n        parsedStyle = _parseStyle6[0],\n        effectStyle = _parseStyle6[1];\n\n    var styleStr = normalizeStyle(parsedStyle);\n    var styleId = uniqueHash(fullPath, styleStr);\n\n    if (isMergedClientSide) {\n      var style = updateCSS(styleStr, styleId, {\n        mark: ATTR_MARK,\n        prepend: 'queue',\n        attachTo: container\n      });\n      style[CSS_IN_JS_INSTANCE] = CSS_IN_JS_INSTANCE_ID; // Used for `useCacheToken` to remove on batch when token removed\n\n      style.setAttribute(ATTR_TOKEN, tokenKey); // Dev usage to find which cache path made this easily\n\n      if (process.env.NODE_ENV !== 'production') {\n        style.setAttribute(ATTR_DEV_CACHE_PATH, fullPath.join('|'));\n      } // Inject client side effect style\n\n\n      Object.keys(effectStyle).forEach(function (effectKey) {\n        if (!globalEffectStyleKeys.has(effectKey)) {\n          globalEffectStyleKeys.add(effectKey); // Inject\n\n          updateCSS(normalizeStyle(effectStyle[effectKey]), \"_effect-\".concat(effectKey), {\n            mark: ATTR_MARK,\n            prepend: 'queue',\n            attachTo: container\n          });\n        }\n      });\n    }\n\n    return [styleStr, tokenKey, styleId];\n  }, // Remove cache if no need\n  function (_ref2, fromHMR) {\n    var _ref3 = _slicedToArray(_ref2, 3),\n        styleId = _ref3[2];\n\n    if ((fromHMR || autoClear) && isClientSide) {\n      removeCSS(styleId, {\n        mark: ATTR_MARK\n      });\n    }\n  }),\n      _useGlobalCache2 = _slicedToArray(_useGlobalCache, 3),\n      cachedStyleStr = _useGlobalCache2[0],\n      cachedTokenKey = _useGlobalCache2[1],\n      cachedStyleId = _useGlobalCache2[2];\n\n  return function (node) {\n    var styleNode;\n\n    if (!ssrInline || isMergedClientSide || !defaultCache) {\n      styleNode = /*#__PURE__*/React.createElement(Empty, null);\n    } else {\n      var _ref4;\n\n      styleNode = /*#__PURE__*/React.createElement(\"style\", _extends({}, (_ref4 = {}, _defineProperty(_ref4, ATTR_TOKEN, cachedTokenKey), _defineProperty(_ref4, ATTR_MARK, cachedStyleId), _ref4), {\n        dangerouslySetInnerHTML: {\n          __html: cachedStyleStr\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, styleNode, node);\n  };\n} // ============================================================================\n// ==                                  SSR                                   ==\n// ============================================================================\n\nexport function extractStyle(cache) {\n  // prefix with `style` is used for `useStyleRegister` to cache style context\n  var styleKeys = Array.from(cache.cache.keys()).filter(function (key) {\n    return key.startsWith('style%');\n  }); // const tokenStyles: Record<string, string[]> = {};\n\n  var styleText = '';\n  styleKeys.forEach(function (key) {\n    var _ = _slicedToArray(cache.cache.get(key)[1], 3),\n        styleStr = _[0],\n        tokenKey = _[1],\n        styleId = _[2];\n\n    styleText += \"<style \".concat(ATTR_TOKEN, \"=\\\"\").concat(tokenKey, \"\\\" \").concat(ATTR_MARK, \"=\\\"\").concat(styleId, \"\\\">\").concat(styleStr, \"</style>\");\n  });\n  return styleText;\n}"]},"metadata":{},"sourceType":"module"}